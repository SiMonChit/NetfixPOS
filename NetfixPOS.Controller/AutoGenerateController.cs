using NetfixPOS.Controller.Interface;
using NetfixPOS.DataAccess;
using NetfixPOS.Models;
using System;
using System.Collections.Generic;
using System.Data;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace NetfixPOS.Controller
{
    public class AutoGenerateController : IAutoGenerate
    {
        private AutoGenerateDAL _autogenerate;
        private EventLogsController _eventLogs;
        public AutoGenerateController()
        {
            _autogenerate = new AutoGenerateDAL();
            _eventLogs = new EventLogsController();
        }
        public void Delete(int id)
        {
            try
            {
                _autogenerate.Delete(id);
                _eventLogs.AddLog("Delete", DateTime.Now, "Currency Form", "Delete CurrencyId " + id.ToString(), "Delete Success");
            }
            catch (Exception ex)
            {
                _eventLogs.AddLog("Delete", DateTime.Now, "AutoGenerate Form", "Delete AutoGenerate", ex.Message);
            }
        }

        public void Insert(AutoGenerateModel generate)
        {
            try
            {
                _autogenerate.Insert(generate);
                _eventLogs.AddLog("Insert", DateTime.Now, "AutoGenerate Form", "Insert " + generate.GenerateNo + " " + generate.GenerateType + " " + generate.LastValue.ToString(), "Insert Success") ;
            }
            catch (Exception ex)
            {
                _eventLogs.AddLog("Insert", DateTime.Now, "AutoGenerate Form", "Insert AutoGenerate", ex.Message);
            }
        }

        public void Update(AutoGenerateModel generate)
        {
            try
            {
                _autogenerate.Update(generate);
                _eventLogs.AddLog("Update", DateTime.Now, "AutoGenerate Form", "Update AutoGenerate", "Update Success");
            }
            catch (Exception ex)
            {
                _eventLogs.AddLog("Update", DateTime.Now, "AutoGenerate Form", "Update AutoGenerate", ex.Message);
            }
        }
        public void AutoCodeGenerate(string GenerateType)
        {

        }
        public string GetGenerateNo(string GenerateType)
        {
            return _autogenerate.GetGenerateNo(GenerateType);
        }
        public DataTable GetGenerateData()
        {
            return _autogenerate.GetGenerateData();
        }
        public dsNewSetup.tbl_GE_AppInfoRow GetAppInfo(int id)
        {
            return _autogenerate.GetAppInfo(id);
        }
        public void AppInfo_Update(GeneralModel general)
        {
            _autogenerate.AppInfo_Update(general);
        }
        public dsNewSetup.tbl_GE_AppInfoDataTable GetAppInfo()
        {
            return _autogenerate.GetAppInfo();
        }
    }
}
